# Changelog

Все изменения проекта документированы в этом файле.

## [1.0.0] - 2024-11-16

### ✅ Финальная версия - Готово к презентации

#### Добавлено
- **Лучшая модель:** `best_model_optimized.pkl` (AUC 0.8546, F1 0.3972)
- **Архитектура:** 7 моделей CatBoost + LogisticRegression стекинг
- **Структура проекта:**
  - `src/` - модули утилит
  - `scripts/` - скрипты обучения
  - `docs/` - документация
  - `models/` - обученные модели
- **Документация:**
  - `README.md` - главная документация
  - `docs/architecture.md` - детальная архитектура модели
  - `docs/report.md` - технический отчет
  - `docs/executive_summary.md` - краткое резюме
- **Makefile** для автоматизации задач
- **PROJECT_STRUCTURE.txt** - визуальная структура проекта
- **.gitignore** для контроля версий

#### Улучшено
- Удалены шумовые признаки (`random_noise_1`, `referral_code`)
- Добавлена нормализация данных (StandardScaler)
- Разнообразие в балансировке классов (ADASYN, SMOTE, SMOTE+Tomek)
- Стекинг улучшил F1-Score на +62% vs лучшая одиночная модель

#### Результаты
- AUC-ROC: 0.8546 (+0.2% vs базовая)
- PR-AUC: 0.3767 (+13.1% vs базовая)
- F1-Score: 0.3972 (+38.3% vs базовая)
- Matthews: 0.3638 (+25.5% vs базовая)

---

## [0.9.0] - Экспериментальные версии

### [0.9.2] - train_optimized_plus.py
- **Результат:** AUC 0.8526 (-0.0020 vs лучшая)
- Добавлено 10-12 целевых взаимодействий признаков
- Новые признаки: `combined_risk_ratio`, `critical_risk_combo`
- **Вывод:** Маргинальное улучшение, не используется

### [0.9.1] - train_with_fe_v2.py
- **Результат:** AUC 0.7906 (-0.0640 vs базовая) ❌
- Добавлено 55 новых признаков (полиномы, взаимодействия)
- **Вывод:** Агрессивный FE привел к переобучению

### [0.9.0] - train_max_auc.py ⭐
- **Результат:** AUC 0.8546, F1 0.3972 ✅
- 7 моделей CatBoost + LogisticRegression стекинг
- Разнообразие в параметрах и балансировке
- **Вывод:** ЛУЧШАЯ МОДЕЛЬ

---

## [0.8.0] - train_ultimate.py
- **Результат:** AUC 0.8493, F1 0.3208
- Добавлен ADASYN для балансировки
- Нормализация данных (StandardScaler)
- Оптимизация гиперпараметров через Optuna
- Удаление шумовых признаков

---

## [0.7.0] - train_advanced.py
- **Результат:** AUC 0.8412
- Добавлен feature engineering:
  - `debt_to_income_ratio`
  - `credit_utilization`
  - `cash_flow_ratio`
  - `employment_to_age_ratio`

---

## [0.6.0] - train.py (Baseline)
- **Результат:** AUC 0.8529, PR-AUC 0.3330, F1 0.2871
- Базовая модель без оптимизаций
- Проблемы:
  - Нет нормализации данных
  - scale_pos_weight=1.0 (нет балансировки)
  - random_noise_1 не удален

---

## [0.5.0] - Подготовка данных
- Создан `prepare_data.py`:
  - Загрузка из CSV, JSONL, XML, Parquet
  - Объединение по `customer_id`
  - Обработка пропусков
  - Нормализация имен колонок

---

## Ключевые метрики по версиям

| Версия | Модель | AUC-ROC | PR-AUC | F1-Score |
|--------|--------|---------|--------|----------|
| 0.6.0 | train.py | 0.8529 | 0.3330 | 0.2871 |
| 0.7.0 | train_advanced.py | 0.8412 | 0.3594 | - |
| 0.8.0 | train_ultimate.py | 0.8493 | 0.3629 | 0.3208 |
| 0.9.0 | **train_max_auc.py** | **0.8546** | **0.3767** | **0.3972** ⭐ |
| 0.9.1 | train_with_fe_v2.py | 0.7906 | - | - ❌ |
| 0.9.2 | train_optimized_plus.py | 0.8526 | 0.3774 | 0.3894 |
| **1.0.0** | **best_model_optimized.pkl** | **0.8546** | **0.3767** | **0.3972** ✅ |

---

## Что НЕ сработало

1. **Агрессивный Feature Engineering** (+55 признаков)
   - AUC упал до 0.7906
   - Переобучение

2. **Полиномиальные признаки**
   - Создание признаков 2-го и 3-го порядка
   - Переобучение

3. **Агрегации по группам**
   - Средние/медианы по категориям
   - Риск data leakage

---

## Следующие шаги (для дальнейшего развития)

- [ ] Калибровка вероятностей (CalibratedClassifierCV)
- [ ] Тестирование XGBoost вместо CatBoost
- [ ] Более точный подбор порога отсечения
- [ ] Cross-validation для более надежной оценки
- [ ] Создание веб-интерфейса для предсказаний

---

**Статус:** ✅ Версия 1.0.0 - Готово к использованию и презентации
